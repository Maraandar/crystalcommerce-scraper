<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MTG cards</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
    <!-- <script defer src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script> -->
    <style>
        abbr[title] {
            border-bottom: none !important;
            cursor: inherit !important;
            text-decoration: none !important;
        }
    </style>
</head>

<body>
    <section class="hero is-info">
        <div class="hero-body">
            <p class="title">
                MTG card price checker
            </p>
            <p class="subtitle">
                Because we love magic, but are cheap.
            </p>
        </div>
    </section>
    <section class="section">
        {% block form %}{% endblock %}
    </section>
    {% if cardList %}
    <section class="section">
        <table class="table">
            <thead>
                <tr>
                    <th>Card</th>
                    {% for store in stores %}
                    <th><abbr title="{{ store['name'] }}">{{ store['abbr'] }}</abbr></th>
                    {% endfor %}
                    <th>Min Price</th>
                </tr>
            </thead>
            <tbody>
                {{ stores.append({'name': 'Min', 'abbr': 'min'}) }}
                {% for card in cardList %}
                <tr>
                    <th>{{ card }}</th>
                    {% for store in stores %}
                    {% if store['abbr'] in cardList[card] %}
                    <td {% if 'class' in cardList[card][store['abbr']]
                        %}class="{{ cardList[card][store['abbr']]['class'] }}" {% endif %}><abbr
                            title="{% if store['abbr'] == 'min' %}{{ cardList[card][store['abbr']]['store'] }}: {% endif %}{{ cardList[card][store['abbr']]['condition'] }} / {{ cardList[card][store['abbr']]['language'] }}">${{
                            cardList[card][store['abbr']]['price'] }}</abbr></td>
                    {% else %}
                    <td>-</td>
                    {% endif %}
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
            <thead>
                <tr>
                    <th>Totals</th>
                    {% for store in stores %}
                    <th>{{ "$%.2f"|format(totals[store['abbr']]) }}</th>
                    {% endfor %}
                </tr>
            </thead>
        </table>
    </section>
    {% endif %}
</body>

</html>